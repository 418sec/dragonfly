<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>File: History</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Inconsolata">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=PT+Sans">
    <script type="text/javascript" charset="utf-8">
      (function($){
        // YARD automatically creates a table of contents
        // Let's place it inside .col1, instead of #content
        $(document).ready(function(){
          $('#toc').prependTo($('.col1'));
          
        });
      })(jQuery);
    </script>
  </head>
  <body>
    <!-- GOOGLE ANALYTICS -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-16382932-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    <!-- *************** -->

    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>

    <div id="header" class="clearfix">
      
      <div id="logo">DRAGONFLY (v 0.9.3)</div>
      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

    </div>

    <div>
      <iframe id="search_frame"></iframe>
    </div>

    <div id="content" class="clearfix">
      <div class="col1">
        <div id='filecontents'><h1>0.9.4 (2011-06-10)</h1>

<h2>Fixes</h2>

<ul>
<li>Made use of Rack calling <code>close</code> on the response body to clean up tempfiles.
The response body is now the job, which delegates <code>each</code> to the temp_object.</li>
</ul>


<h1>0.9.3 (2011-06-03)</h1>

<h2>Fixes</h2>

<ul>
<li>TempObject#to_file sets file permissions 644 - copying wasn't previously guaranteeing this</li>
<li>Added TempObject#close and closed?, which Rack uses to clean up tempfiles</li>
<li>replaced '/' characters with '~' in base64 encoded urls (they were confusing url recognition)</li>
</ul>


<h1>0.9.2 (2011-05-19)</h1>

<h2>Features</h2>

<ul>
<li>Added env['dragonfly.job'] for use in other Rack middlewares</li>
<li>Added CookieMonster middleware for removing 'Set-Cookie' headers</li>
</ul>


<h2>Fixes</h2>

<ul>
<li>Remove 'Set-Cookie' header from any requests coming from a rails route</li>
</ul>


<h1>0.9.1 (2011-05-11)</h1>

<h2>Features</h2>

<ul>
<li>Added reflection methods <code>app.processor_methods</code>, <code>app.generator_methods</code> and <code>app.job_methods</code></li>
</ul>


<h2>Fixes</h2>

<ul>
<li>Improved performance of <code>resize_and_crop</code> method, using imagemagick built-in '^' operator</li>
<li>Improved server security validations</li>
<li>Deal with Excon::Errors::SocketError: EOFError errors which get thrown sometimes from S3 connection</li>
<li>Allow files with '..' (but not '../') in the middle of their name in file data store</li>
</ul>


<h1>0.9.0 (2011-04-27)</h1>

<h2>Features</h2>

<ul>
<li>Model accessors are configurable

<ul>
<li>added <code>after_assign</code> callback</li>
<li>added <code>after_unassign</code> callback</li>
<li>added <code>copy_to</code> for e.g. up-front thumbnailing</li>
<li>added <code>storage_opts</code> and <code>storage_xxx</code></li>
</ul>
</li>
<li>Added model <code>remove_xxxxx</code> for using with checkboxes</li>
<li>Added model <code>xxxx_url</code> for assigning content from a url</li>
<li>Added job step <code>fetch_url</code></li>
<li>Added <code>retain!</code> and model <code>retained_xxxxx</code> for avoiding multiple uploads when validations fail</li>
<li>Added <code>image?</code> to imagemagick analyser</li>
<li>Added imagemagick <code>plain</code> generator</li>
<li>Added <code>strip</code> to imagemagick processor</li>
<li>Added CouchDataStore that uses a CouchDB as a data storage engine</li>
<li>Added <code>before_serve</code> callback</li>
<li>Allowed for configurable response headers</li>
<li>Made url re-definable with <code>define_url</code></li>
<li><code>validates_property</code> can take a proc for the message</li>
<li>Saved configs can be registered now so they can be used with <code>configure_with(:symbol)</code></li>
<li>Configurable objects can fallback to a parent configuration, so e.g. the server can be configured through the parent app's configure block.</li>
<li>Allowed initializing data by using a pathname</li>
<li><code>convert_command</code> and <code>identify_command</code> can be configured on a per-app basis</li>
<li>Added <code>remote_url</code> and ability for datastores to form urls

<ul>
<li>Added for File, Couch and S3 datastores</li>
</ul>
</li>
<li>Models automatically copy magic attributes into meta</li>
<li>S3DataStore configurable headers</li>
<li>'dragonfly/rails/images' slightly smarter and added <code>file_accessor</code> for more semantic use of non-image attachments</li>
<li>Made dragonfly response configurable</li>
<li>Mongo datastore can reuse an existing connection/db</li>
<li>FileDataStore can be configured not to store meta (save on extra file)</li>
</ul>


<h2>Changes</h2>

<ul>
<li>Removed <code>url_path_prefix</code> and <code>url_suffix</code> in favour of <code>url_format</code>

<ul>
<li>Middleware doesn't need mount point argument now</li>
</ul>
</li>
<li>Removed support for rails 2.3</li>
<li>Removed RMagick support (and extracted into a plugin)</li>
<li>ImageMagick processors etc. moved into the ImageMagick namespace</li>
<li>moved from aws/s3 -> fog for S3 support</li>
<li>Renamed SimpleEndpoint -> Server</li>
<li>moved name and meta into Job, simplified, and now they don't cause the job to be applied</li>
<li>FileDataStore stores metadata in xxx.meta now, not xxx.extra</li>
<li>removed Job methods <code>uid_basename</code>, <code>uid_extname</code>, <code>encoded_format</code> and <code>encoded_extname</code> as they are now unnecessary</li>
</ul>


<h2>Fixes</h2>

<ul>
<li>Performance tweaks regarding temp_objects model accessors and job objects</li>
</ul>


<h1>0.8.5 (2011-05-11)</h1>

<h2>Fixes</h2>

<ul>
<li>Allow filenames that have '..' in them (but not '../') in the filedatastore</li>
<li>Better security for server</li>
</ul>


<h1>0.8.4 (2011-04-27)</h1>

<h2>Fixes</h2>

<ul>
<li>Security fix for file data store</li>
</ul>


<h1>0.8.2 (2011-01-11)</h1>

<h2>Fixes</h2>

<ul>
<li>Renamed ActiveModel methods like 'attachments' to avoid name clashes</li>
<li>Respond properly to HEAD, POST, PUT and DELETE requests</li>
<li>Got it working with jRuby and Rubinius</li>
<li>Made DOS protection SHA (and ETag) consistent</li>
</ul>


<h1>0.8.1 (2010-11-22)</h1>

<h2>Fixes</h2>

<p>Removed runtime dependencies that Jeweler automatically takes from the Gemfile</p>

<h1>0.8.0 (2010-11-21)</h1>

<h2>Features</h2>

<ul>
<li>New ImageMagick generator, processor, encoder and analyser, which are now defaults
(thanks to Henry Phan for work on this)</li>
</ul>


<h2>Fixes</h2>

<ul>
<li>Works with Rails 3.0.2 uploaded files (which has a changed API)</li>
</ul>


<h1>0.7.7 (2010-10-31)</h1>

<h2>Features</h2>

<ul>
<li>Added username/password authentication to mongo data store</li>
</ul>


<h2>Fixes</h2>

<ul>
<li>Fixes for Windows, inc. tempfile binmode and closing files</li>
<li>"IOError: closed stream" fix (hopefully!)</li>
</ul>


<h1>0.7.6 (2010-09-12)</h1>

<h2>Features</h2>

<ul>
<li>Added methods for querying job steps, and Job#uid, Job#uid_basename, etc.</li>
<li>Added Job#b64_data</li>
<li>Added configurable url_suffix</li>
<li>Added configurable content<em>disposition and content</em>filename</li>
<li>Can pass extra GET params to url_for</li>
<li>Can manually set uid on FileDataStore and S3DataStore
  (not yet documented because attachments have no way to pass it on yet)</li>
<li>Model attachments store meta info about themselves</li>
</ul>


<h2>Changes</h2>

<ul>
<li>Configurable module doesn't implicitly call 'call' if attribute set as proc</li>
<li>Refactored Endpoint module -> Response object</li>
</ul>


<h2>Fixes</h2>

<ul>
<li>Ruby 1.9.2-p0 was raising encoding errors due to Tempfiles not being in binmode</li>
</ul>


<h1>0.7.5 (2010-09-01)</h1>

<h2>Changes</h2>

<ul>
<li>RMagick processor, encoder, analyser and generator all use the filesystem now
They can be configured to use in-memory strings with the use_filesystem config option.</li>
<li>Upgraded support from Rails 3.0.0.rc -> Rails.3.0.0</li>
</ul>


<h1>0.7.4 (2010-08-28)</h1>

<h2>Features</h2>

<ul>
<li>Gave model accessors bang methods process! and encode!</li>
</ul>


<h1>0.7.3 (2010-08-27)</h1>

<h2>Fixes</h2>

<ul>
<li>Seems as though inserting after Rails' Rack::Lock was worth it after all</li>
</ul>


<h1>0.7.2 (2010-08-27)</h1>

<h2>Fixes</h2>

<ul>
<li>S3DataStore was breaking if previous data hadn't stored meta</li>
</ul>


<h1>0.7.1 (2010-08-26)</h1>

<h2>Fixes</h2>

<ul>
<li>SimpleEndpoint was modifying env path_info so wasn't creating proper cache keys</li>
<li>to_response accepts env, so can use if-not-modified, etc.</li>
</ul>


<h2>Features</h2>

<ul>
<li>Doc tweaks: Added mongo page, notes about Capistrano</li>
</ul>


<h2>Changes</h2>

<ul>
<li>ETags generated by hash of job.serialize - was getting a bit long</li>
</ul>


<h1>0.7.0 (2010-08-25)</h1>

<h2>Features</h2>

<ul>
<li>Ability to chain processing, encoding</li>
<li>Added Generators for arbitrary content generation</li>
<li>'fetch_file' method for easily getting local files</li>
<li>ActiveModel support</li>
<li>Mongoid support</li>
<li>Better Sinatra, etc. support (using 'to_response')</li>
<li>Data stores now store meta, name and format information too</li>
<li>Added Mongo Data Store</li>
<li>temp_objects maintain name, meta, etc. across processing, encoding, etc.</li>
<li>added portrait? and landscape? to RMagick analyser</li>
<li>Ability to add single custom processor/encoder/analyser/generator</li>
<li>added flip and flop to RMagick processor</li>
<li>ability to configure whether it trusts the file extension</li>
<li>nice text response for root path</li>
<li>ability to configure url host</li>
<li>ability to override path_prefix/host when calling url</li>
<li>routed endpoints</li>
<li>simple endpoints</li>
<li>more intelligent working out of Content-Type to send back</li>
</ul>


<h2>Fixes</h2>

<ul>
<li>proper use of ETags</li>
<li>remove whitespace from file/s3 datastore uids</li>
<li>dragonfly/rails/images url-encodes rack-cache config for windows users</li>
<li>Ruby 1.9.2 support</li>
<li>Better RMagick memory management using image.destroy!</li>
</ul>


<h2>Changes</h2>

<ul>
<li>Dragonfly::App[:images] -> Dragonfly[:images]</li>
<li>Moved text/plasma generation into Generator</li>
<li>Use of lazy 'Job' objects</li>
<li>simplified shortcuts interface</li>
<li>changed interface for attaching to ActiveRecord</li>
<li>simplified saved configurations and allow referring to them as symbols</li>
<li>Removed need for Base class for datastores, processors, analysers and encoders</li>
<li>FileCommandAnalyser included in Rails config, not RMagick</li>
<li>better use of logging module for sharing logs between classes</li>
<li>mounting the app is down the middleware/elsewhere, not the app itself</li>
<li>DOS protection off by default</li>
<li>encoded urls</li>
<li>got rid of unnecessary configurable sha_length</li>
</ul>


<h1>0.6.2 (2010-06-24)</h1>

<h2>Features</h2>

<ul>
<li>Added ability for custom error messages in validations</li>
</ul>


<h1>0.6.1 (2010-05-16)</h1>

<h2>Fixes</h2>

<ul>
<li>STI was breaking when the model had a mixin too</li>
</ul>


<h1>0.6.0 (2010-05-11)</h1>

<h2>Features</h2>

<ul>
<li>Added 'scale factor' for text generation, which gives better quality font rendering for smaller fonts</li>
<li>Configurable objects allow for passing args, and passing a block for extra config</li>
<li>Added more 'saved configurations', for easier setting up on e.g. Heroku</li>
<li>Added RMagickAnalyser#format</li>
<li>Added greyscale to RMagickProcessor</li>
<li>S3DataStore is configurable as to whether it uses the filesystem or not (to save a tempfile)</li>
</ul>


<h2>Fixes</h2>

<ul>
<li>Some specs refactoring, including making text processing specs less brittle</li>
<li>RMagickEncoder::SUPPORTED_FORMATS was proving problematic - now we use a configurable list instead</li>
<li>Got Rails 3 beta3 cucumber features working</li>
<li>Added check to see if bucket already exists in S3DataStore - apparently this was problematic in EU</li>
</ul>


<h2>Changes</h2>

<ul>
<li>temp<em>object.tempfile now returns a closed tempfile, which temp</em>object.file returns an open file.
Can also pass a block to temp_object.file which closes the file automatically</li>
<li>Processors/Analysers/Encoders know about app now so can log to app's log</li>
<li>Imagemagick errors in RMagick processor/analyser/encoder now throw unable<em>to</em>handle and log a warning</li>
<li>Removed Rails generators - better being more explicit with saved configurations which are more concise now</li>
</ul>


<h1>0.5.7 (2010-04-18)</h1>

<h2>Fixes</h2>

<ul>
<li>Strip file command mime_type value because some versions of file command were appending a line-break</li>
</ul>


<h1>0.5.6 (2010-04-13)</h1>

<h2>Fixes</h2>

<ul>
<li>Wasn't working properly with Single-Table Inheritance</li>
</ul>


<h1>0.5.5 (2010-04-13)</h1>

<h2>Fixes</h2>

<ul>
<li>Rails 3 has changed 'metaclass' -> 'singleton_class' so adapt accordingly</li>
</ul>


<h1>0.5.4 (2010-04-12)</h1>

<h2>Features</h2>

<ul>
<li>Allow setting the uid manually</li>
</ul>


<h2>Fixes</h2>

<ul>
<li>Assigning an accessor to nil wasn't working properly</li>
</ul>


<h1>0.5.3 (2010-03-27)</h1>

<h2>Fixes</h2>

<ul>
<li>Assigning an accessor to nil wasn't working properly</li>
</ul>


<h1>0.5.2 (2010-03-04)</h1>

<h2>Features</h2>

<ul>
<li>Added 'registered mime-types'</li>
<li>Enhanced docs</li>
</ul>


<h2>Fixes</h2>

<ul>
<li>RMagickEncoder only encodes if not already in that format</li>
</ul>


<h1>0.5.1 (2010-02-20)</h1>

<h2>Fixes</h2>

<ul>
<li>Fixed 'broken pipe' errors in FileCommandAnalyser due to outputting loads of stuff to the command line stdin</li>
</ul>


<h1>0.5.0 (2010-02-20)</h1>

<h2>Added support</h2>

<ul>
<li>support for Rails 3</li>
</ul>


<h1>0.4.4 (2010-02-16)</h1>

<p>Better late than never to start logging change history...</p>

<h2>New features</h2>

<ul>
<li>added aspect<em>ratio to rmagick</em>analyser</li>
</ul>


<h2>Added support</h2>

<ul>
<li>support for ruby 1.9</li>
<li>added development dependencies to gemspec for easier setting up</li>
</ul>
</div>
      </div>
      <div class="col2">
        <ul class="main_files clearfix">
          <li><a href="file.Index.html" title="Home">Home</a></li><li><a href="file.README.html" title="Quick start for Rails (README)">Quick start for Rails (README)</a></li><li><a href="file.GeneralUsage.html" title="General usage">General usage</a></li><li><a href="file.Rails2.html" title="Rails 2.3">Rails 2.3</a></li><li><a href="file.Rails3.html" title="Rails 3">Rails 3</a></li><li><a href="file.Models.html" title="Models">Models</a></li><li><a href="file.ImageMagick.html" title="ImageMagick">ImageMagick</a></li><li><a href="file.Rack.html" title="Rack">Rack</a></li><li><a href="file.Sinatra.html" title="Sinatra">Sinatra</a></li><li><a href="file.Heroku.html" title="Heroku">Heroku</a></li><li><a href="file.Mongo.html" title="Mongo">Mongo</a></li><li><a href="file.Couch.html" title="Couch">Couch</a></li><li><a href="file.DataStorage.html" title="Data Storage">Data Storage</a></li><li><a href="file.Analysers.html" title="Analysers">Analysers</a></li><li><a href="file.Processing.html" title="Processing">Processing</a></li><li><a href="file.Encoding.html" title="Encoding">Encoding</a></li><li><a href="file.Generators.html" title="Generators">Generators</a></li><li><a href="file.Configuration.html" title="Configuration">Configuration</a></li><li><a href="file.URLs.html" title="URLs / Endpoints">URLs / Endpoints</a></li><li><a href="file.MimeTypes.html" title="Mime Types">Mime Types</a></li><li><a href="file.Caching.html" title="Caching">Caching</a></li><li><a href="file.ServingRemotely.html" title="Serving Remotely">Serving Remotely</a></li><li><a href="file.ExampleUseCases.html" title="Example Use Cases">Example Use Cases</a></li><li><a href="file.History.html" title="History">History</a></li>
        </ul>
      </div>
    </div>

    <div id="footer">
  Generated on Fri Jun 10 22:51:50 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.8 (ruby-1.9.2).
</div>

  </body>
</html>